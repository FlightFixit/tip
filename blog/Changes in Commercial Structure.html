<!DOCTYPE html PUBLIC
 "+//ISBN 0-9673008-1-9//DTD OEB 1.0.1 Document//EN"
 "http://openebook.org/dtds/oeb-1.0.1/oebdoc101.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="author" content="Will Holcomb" />
<meta name="cover" content="tip:DoH" />
<link rel="stylesheet" type="text/css" href=".../style/blog.css"/>
<title>The Spread of Department Stores</title>
</head>
<body>
<h1>The Spread of Department Stores</h1>
<h2>by Will Holcomb</h2>

<hr/>

<p>I've been thinking about <a href="http://freebase.com">Freebase</a> and it's application to <a type="org" href="http://singinst.org/"><a type="definition" href="http://en.wikipedia.org/wiki/Memetics">memetics</a></a>. I'm particularly interested in timeseries <a href="http://www.informationisbeautiful.net">infographics</a>. One of my all time favorites is <a href="http://projects.flowingdata.com/walmart/">the growth of Wal-Mart</a>.</p>

<object class="row" width="900" height="450"
        data="http://media.flowingdata.com/walmart/Walmarts201004.swf" 
        type="application/x-shockwave-flash">
  <iframe width="853" height="510" src="http://www.youtube.com/embed/sjCAr1QOByE"></iframe>
</object>

<p>What I'd like to be able to visualize is the transition in the method of consumption. I want to see a variety of stores. The <a href="http://tinyurl.com/4p5ovvk">data's in Freebase</a> and <a href="http://code.google.com/apis/maps/">Google's got maps</a>.</p>

<p>Loading a map and placing markers is a <a href="https://github.com/wholcomb/tip/blob/6e454b32a4780e241af1955c2396288b4e56d00d/blog/the%20growth%20of%20wal-mart.jquery">simple enough task</a>:</p>

<script type="text/javascript" src=".../lib/google/loader/js"></script>
<script type="text/javascript"> google.load( 'jquery', '1.5' ) </script>
<!-- Error: "Sensor parameter must be specified
<script type="text/javascript"> google.load( 'maps', '3' ) </script>
-->
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>

<script type="text/javascript" src="https://github.com/wholcomb/tip/raw/6e454b32a4780e241af1955c2396288b4e56d00d/blog/the%20growth%20of%20wal-mart.jquery"></script>

<p>There is a problem, however, with determining where to place the markers. Google Maps has a <a href="http://code.google.com/apis/maps/documentation/geocoding/">geocoding <acronym title="Application Programming Interface">api</acronym></a> that will translate addresses to the latitude/longitude needed to place markers. It is rate limited, however, so if I just iterate over the results from the <a href="http://tinyurl.com/4p5ovvk"><acronym title="Metaweb Query Language">MQL</acronym> query</a> I get the error: <code>OVER_QUERY_LIMIT</code>.</p>

<p>It would be nice if I could pull the geocode information from Freebase. There's already a <a href="http://www.freebase.com/schema/location/geocode">geocode type</a>. It's a property of the <a href="http://www.freebase.com/schema/location/location">location type</a>. The <a href="http://www.freebase.com/schema/location/mailing_address">address type</a> which stores the position information for the <a href="http://www.freebase.com/schema/business/business_location">business loaction type</a> has <a href="http://www.freebase.com/schema/location/location">location</a> as an <a href="http://wiki.freebase.com/wiki/Included_Type">included type</a>.

This means that the locations already have a geocode property, though a quick check shows the entries are not set. So, a solution is a script to look up the businesses using the Google api and pushing them to Freebase.

<script type="text/javascript" src="set geocode locations.jquery"></script>


<script type="text/javascript" src="the growth of wal-mart.jquery"></script>
</body>
</html>
