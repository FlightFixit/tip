<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="-50 -50 100 100" width="100%" height="100%"
     xmlns="http://www.w3.org/2000/svg"
     xmlns:html="http://www.w3.org/1999/xhtml"
     xmlns:xlink="http://www.w3.org/1999/xlink">
  <title>Text Bounding Box</title>
  <defs>
      <script type="text/javascript" xlink:href=".../lib/jquery/jquery.js"/>
      <script type="application/javascript" xlink:href=".../lib/tip/Array.each.js"/>
      <script type="application/javascript" xlink:href=".../lib/tip/__.jquery"/>
      <script type="text/javascript"><![CDATA[
        $(window).bind( 'load', function() {
            var $root = $.__.$('#')
            $root.__defineGetter__( 'view', function() {
                this.view_obj =
                    ( this.view_obj || ( function( attr ) {
                        var view = attr.split( ' ' )
                        return {
                            x : view[0],
                            y : view[1],
                            width : view[2],
                            height : view[3],
                        }
                    } )( this.attr( 'viewBox' ) ) )
                return this.view_obj
            } )
            $root.__defineSetter__( 'view', function( view ) {
                this.view_obj = view
                this.attr( 'viewBox', ( view.x + ' ' +
                                        view.y + ' ' +
                                        view.width + ' ' +
                                        view.height ) )
                return this.view_obj
            } )

            $root.view = { x : - window.innerWidth / 2,
                           width : window.innerWidth,
                           y : - window.innerHeight / 2,
                           height : window.innerHeight,
                         }
            var $input = $.__.$('<html:input/>')
            $root.append( $.__.$('<foreignObject/>').attr( $root.view )
                          .append( $input ) )
            $input.attr( 'value', 'text' )
            $input.attr( { x : 0, y : 0 } )
            console.log( window.innerWidth + ':' + $root.width() )
        } )
      ]]></script>

      <style type="text/css">
        text { text-anchor: middle }
        rect { fill: #F0F0F0; fill-opacity: .75;
               stroke-width: .3; stroke: black; stroke-opacity: .5 }
      </style>
  </defs>
</svg>
